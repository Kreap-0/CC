## 编译实验

### Lexer

1. 输入：测试程序文件
2. 输出：
    - 二元式文件（*.dyd），包含所有单词符号和种别码；
    - 错误文件（*.err），记录非法单词及其行号。
3. 要求：
    - 正确识别关键字、标识符、常数、运算符和分隔符；
    - 若无错误，错误文件应为空。

### Parser

1. 输入：词法分析生成的二元式文件。
2. 输出：
    - 变量名表文件（*.var），包含变量名、所属过程、分类、变量类型、变量层次、变量再变量表中的位置；
    - 过程名表文件（*.pro），包含过程名、过程类型、层次及变量区间信息；
    - 错误文件（*.err），记录语法错误信息。
3. 要求：
    - 使用递归下降法实现，保证文法无左递归、无公共左因子；
    - 对语法结构进行正确的匹配与错误处理。


### Tests

#### Sample 1
```
begin
  integer k;
  integer function F(n);
    begin
      integer n;
      if n<=0 then F:=1
      else F:=n*F(n-1)
    end;
  read(m);
  k:=F(m);
  write(k)
end
```
#### Sample 2

```
begin
  integer x;
  integer y
  read(x);
  if x > 0 then
    y := x * 2;
  else
edn
```

### *.dyd —— 词法二元式

格式：
- 单词符号[空格]种别说明；
- 程序每行后加：`EOLN[空格]24`
- 测试程序结尾加：`EOF[空格]25`
	
例如：
```
begin 1
EOLN 24
integer 3
k 16
…
EOF 25
```

### *.err —— 错误信息

格式：
`***LINE:行号[空格]错误性质`，如果无错误则 *.err 为空

例如：
```
***LINE:7 Missing ';' before 'else'
```

### *.var —— 变量名表

| vname | vproc | vkind | vtype | vlev | vadr |
| -- | -- | -- | -- | -- | -- |
| 变量名 | 所属过程 | 分类 | 变量类型 | 变量层次 | 表偏移 |
| char(16) | char(16) | 0/1 - 变量/形参 | types | int | int |

### *.pro —— 过程名表

|pname | ptype | plev | fadr | ladr|
| -- | -- | -- | -- | -- |
|过程名 | 过程类型 | 过程层次 | 起始表偏移 | 终止表偏移|
| char(16) | types | int | int | int |

### 文法

```
<程序>→<分程序>
<分程序>→begin <说明语句表>；<执行语句表> end
<说明语句表>→<说明语句>│<说明语句表> ；<说明语句>
<说明语句>→<变量说明>│<函数说明>
<变量说明>→integer <变量>
<变量>→<标识符>
<标识符>→<字母>│<标识符><字母>│ <标识符><数字>
<字母>→a│b│c│d│e│f│g│h│i│j│k│l│m│n│o │p│q │r│s│t│u│v│w│x│y│z
<数字>→0│1│2│3│4│5│6│7│8│9
<函数说明>→integer function <标识符>（<参数>）；<函数体>
<参数>→<变量>
<函数体>→begin <说明语句表>；<执行语句表> end
<执行语句表>→<执行语句>│<执行语句表>；<执行语句>
<执行语句>→<读语句>│<写语句>│<赋值语句>│<条件语句>
<读语句>→read(<变量>)
<写语句>→write(<变量>)
<赋值语句>→<变量>:=<算术表达式>
<算术表达式>→<算术表达式>-<项>│<项>
<项>→<项>*<因子>│<因子>
<因子>→<变量>│<常数>│<函数调用>
<常数>→<无符号整数>
<无符号整数>→<数字>│<无符号整数><数字>
<条件语句>→if<条件表达式>then<执行语句>else <执行语句>
<条件表达式>→<算术表达式><关系运算符><算术表达式>
<关系运算符> →<│<=│>│>=│=│<>
```

### 词法

|符号 | 种别 | 符号 | 种别 | 符号 | 种别 |
| -- | -- | -- | -- | -- | -- |
|begin | 1 | end | 2 | integer| 3|
| if  | 4 | then | 5 | else | 6 |
| function  | 7 | read | 8 | write |9 |
| 标识符  | 10 | 常数 | 11 | = | 12|
| <>  | 13 | <= | 14 | < | 15|
| >=  | 16 | > | 17 | - | 18|
| *  | 19 | := | 20 | ( | 21|
| ）  | 22 | ； | 23 |  |  |

